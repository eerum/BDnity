<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP 게시판 웹 사이트</title>
</head>
<body>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var userID = null;
            var sessionUserID = '<%= session.getAttribute("userID") %>';
            if (sessionUserID) {
                userID = sessionUserID;
                alert('이미 로그인이 되어있습니다.');
                window.location.href = 'main.html';
            }

            var user = {
                userID: '<%= user.getUserID() %>',
                userPassword: '<%= user.getUserPassword() %>'
            };

            var userDAO = {
                login: function(userID, userPassword) {
                    // You would need to make an AJAX request here to perform the login.
                    // The result can be handled asynchronously in JavaScript.
                    // For this example, I'll just simulate the result as 1, 0, -1, or -2.
                    return 1; // Replace with the actual result from the server.
                }
            };

            var result = userDAO.login(user.userID, user.userPassword);

            if (result === 1) {
                session.setAttribute("userID", user.userID);
                window.location.href = 'main.html';
            } else if (result === 0) {
                alert('비밀번호가 틀립니다.');
                window.history.back();
            } else if (result === -1) {
                alert('존재하지 않는 아이디입니다.');
                window.history.back();
            } else if (result === -2) {
                alert('데이터베이스 오류가 발생했습니다.');
                window.history.back();
            }
        });
    </script>
</body>
</html>

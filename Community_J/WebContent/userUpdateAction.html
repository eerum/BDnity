<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JSP 게시판 웹 사이트</title>
</head>
<body>
    <script>
        var userID = null;
        <% if (session.getAttribute("userID") != null) { %>
            userID = '<%= session.getAttribute("userID") %>';
        <% } %>
        if (userID == null) {
            alert('로그인을 하세요.');
            location.href = 'login.html';
        }

        var bbsID = 0;
        <% if (request.getParameter("bbsID") != null) { %>
            bbsID = <%= Integer.parseInt(request.getParameter("bbsID")) %>;
        <% } %>
        if (bbsID == 0) {
            alert('유효하지 않은 글입니다.');
            location.href = 'bbs.html';
        }

        var bbs = null;
        <% if (bbs != null && userID.equals(bbs.getUserID())) { %>
            bbs = <%= bbs.toString() %>;
        <% } %>
        if (bbs == null) {
            alert('권한이 없습니다.');
            location.href = 'bbs.html';
        } else {
            var bbsTitle = '<%= request.getParameter("bbsTitle") %>';
            var bbsContent = '<%= request.getParameter("bbsContent") %>';

            if (bbsTitle === '' || bbsContent === '') {
                alert('입력이 안 된 사항이 있습니다.');
                history.back();
            } else {
                location.href = 'bbs.html?pageNumber=1';
            }
        }
    </script>
</body>
</html>
